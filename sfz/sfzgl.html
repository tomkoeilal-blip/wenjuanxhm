<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>受访者管理</title>
  <!-- 引入Layui CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui@2.6.8/dist/css/layui.css">
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <style>
    /* 保持原有样式不变 */
    body {
      background-color: #f2f3f5;
      margin: 0;
      padding: 15px;
    }
    
    .title {
      font-size: 18px;
      color: #333;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .tools {
      margin-bottom: 15px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    #search-input {
      flex-grow: 1;
      max-width: 300px;
    }
    
    .table-container {
      background: white;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    
    .layui-table {
      margin: 0;
      border: none;
    }
    
    .tag {
      display: inline-block;
      padding: 1px 6px;
      border-radius: 3px;
      font-size: 12px;
    }
    
    .tag-active {
      background-color: #f0f9eb;
      color: #009688;
    }
    
    .tag-new {
      background-color: #e8f4fd;
      color: #1E9FFF;
    }
    
    .layui-btn {
      padding: 0 8px;
      height: 26px;
      line-height: 26px;
      font-size: 12px;
    }
    
    .pagination {
      text-align: right;
      margin-top: 10px;
      font-size: 12px;
    }
    
    .pagination a {
      display: inline-block;
      padding: 3px 8px;
      margin: 0 2px;
      border: 1px solid #eee;
      border-radius: 2px;
      color: #666;
    }
    
    .pagination a.active {
      background-color: #1E9FFF;
      color: white;
      border-color: #1E9FFF;
    }
    
    /* 弹窗样式 */
    .modal-content {
      padding: 15px;
    }
    
    .info-item {
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .info-item .label {
      display: inline-block;
      width: 80px;
      color: #666;
    }
  </style>
</head>

<body>
  <div class="title">受访者管理</div>
  
  <div class="tools">
    <input type="text" id="search-input" placeholder="搜索姓名/手机" class="layui-input">
    <button class="layui-btn layui-btn-normal" id="search-btn"><i class="fa fa-search"></i></button>
    <button class="layui-btn" id="add-btn"><i class="fa fa-plus"></i> 添加</button>
  </div>
  
  <div class="table-container">
    <table class="layui-table" lay-size="sm">
      <thead>
        <tr>
          <th>ID</th>
          <th>姓名</th>
          <th>手机</th>
          <th>年龄段</th>
          <th>标签</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1001</td>
          <td>张三</td>
          <td>138****5678</td>
          <td>26-35岁</td>
          <td><span class="tag tag-active">活跃</span></td>
          <td>
            <button class="layui-btn layui-btn-primary view-btn" data-id="1001">查看</button>
          </td>
        </tr>
        <tr>
          <td>1002</td>
          <td>李四</td>
          <td>139****1234</td>
          <td>18-25岁</td>
          <td><span class="tag tag-new">新用户</span></td>
          <td>
            <button class="layui-btn layui-btn-primary view-btn" data-id="1002">查看</button>
          </td>
        </tr>
        <tr>
          <td>1003</td>
          <td>王五</td>
          <td>136****8901</td>
          <td>36-45岁</td>
          <td><span class="tag tag-active">活跃</span></td>
          <td>
            <button class="layui-btn layui-btn-primary view-btn" data-id="1003">查看</button>
          </td>
        </tr>
        <tr>
          <td>1004</td>
          <td>赵六</td>
          <td>135****2345</td>
          <td>26-35岁</td>
          <td><span class="tag tag-new">新用户</span></td>
          <td>
            <button class="layui-btn layui-btn-primary view-btn" data-id="1004">查看</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="pagination">
    <a href="javascript:;" class="prev">上一页</a>
    <a href="javascript:;" class="active">1</a>
    <a href="javascript:;">2</a>
    <a href="javascript:;">3</a>
    <a href="javascript:;" class="next">下一页</a>
  </div>
  
  <!-- 详情弹窗内容 -->
  <div id="detail-modal" class="modal-content" style="display:none;">
    <div class="info-item">
      <span class="label">ID：</span>
      <span id="detail-id">1001</span>
    </div>
    <div class="info-item">
      <span class="label">姓名：</span>
      <span id="detail-name">张三</span>
    </div>
    <div class="info-item">
      <span class="label">性别：</span>
      <span id="detail-gender">男</span>
    </div>
    <div class="info-item">
      <span class="label">手机：</span>
      <span id="detail-phone">13800138000</span>
    </div>
    <div class="info-item">
      <span class="label">年龄段：</span>
      <span id="detail-age">26-35岁</span>
    </div>
    <div class="info-item">
      <span class="label">参与次数：</span>
      <span id="detail-count">5</span>
    </div>
  </div>

  <!-- 修复：使用稳定版本的Layui -->
  <script src="https://cdn.jsdelivr.net/npm/layui@2.6.8/dist/layui.js"></script>
  <script>
    // 确保DOM加载完成后再执行
    document.addEventListener('DOMContentLoaded', function() {
      layui.use(['layer', 'jquery'], function() {
        var layer = layui.layer;
        var $ = layui.jquery; // 引入jQuery
        
        // 受访者数据
        const respondents = [
          {id: 1001, name: '张三', gender: '男', phone: '13800138000', age: '26-35岁', tag: '活跃', count: 5},
          {id: 1002, name: '李四', gender: '女', phone: '13900139000', age: '18-25岁', tag: '新用户', count: 1},
          {id: 1003, name: '王五', gender: '男', phone: '13600136000', age: '36-45岁', tag: '活跃', count: 3},
          {id: 1004, name: '赵六', gender: '女', phone: '13500135000', age: '26-35岁', tag: '新用户', count: 2}
        ];
        
        // 更新详情弹窗内容
        function updateDetailModal(respondent) {
          document.getElementById('detail-id').textContent = respondent.id;
          document.getElementById('detail-name').textContent = respondent.name;
          document.getElementById('detail-gender').textContent = respondent.gender;
          document.getElementById('detail-phone').textContent = respondent.phone;
          document.getElementById('detail-age').textContent = respondent.age;
          document.getElementById('detail-count').textContent = respondent.count;
        }
        
        // 查看详情 - 使用Layui的事件绑定方式
        $(document).on('click', '.view-btn', function() {
          const id = parseInt($(this).data('id'));
          const loadingIndex = layer.load(1);
          
          setTimeout(() => {
            const respondent = respondents.find(item => item.id === id);
            layer.close(loadingIndex);
            
            if (respondent) {
              updateDetailModal(respondent);
              
              layer.open({
                type: 1,
                title: '受访者详情',
                area: ['300px', 'auto'],
                content: $('#detail-modal') // 使用jQuery选择器
              });
            } else {
              layer.msg('未找到该受访者信息', {icon: 2});
            }
          }, 300);
        });
        
        // 搜索功能
        $('#search-btn').click(function() {
          const keyword = $('#search-input').val().trim();
          if (keyword) {
            layer.msg(`搜索: ${keyword}`, {icon: 0});
          } else {
            layer.msg('请输入搜索关键词', {icon: 2});
          }
        });
        
        // 添加受访者
        $('#add-btn').click(function() {
          layer.prompt({title: '请输入受访者姓名', formType: 0}, function(name, index) {
            layer.close(index);
            layer.msg(`已添加受访者: ${name}`, {icon: 1});
          });
        });
        
        // 分页功能
        $(document).on('click', '.pagination a:not(.prev):not(.next)', function() {
          $('.pagination a').removeClass('active');
          $(this).addClass('active');
          layer.msg(`切换到第${$(this).text()}页`, {icon: 0});
        });
        
        // 上一页/下一页
        $('.pagination .prev').click(function() {
          layer.msg('上一页', {icon: 0});
        });
        
        $('.pagination .next').click(function() {
          layer.msg('下一页', {icon: 0});
        });
      });
    });
  </script>
</body>
</html>
